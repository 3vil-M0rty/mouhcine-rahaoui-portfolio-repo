import { useEffect } from "react";
import styles from './Journey.module.css'


function Journey() {
    useEffect(() => {
        const svg = document.querySelector(`.${styles.line}`);
        const path = svg.querySelector("path");
        const totalDistance = svg.clientHeight;
        const startScroll = 828 * window.innerHeight / 100; // Convert 832vh to pixels
        const endScroll = startScroll + 296 * window.innerHeight / 100; // Convert 200vh to pixels

        const drawSVG = () => {
            const distance = window.scrollY;
            let percentage;

            if (distance < startScroll) {
                percentage = 0;
            } else if (distance > endScroll) {
                percentage = 1;
            } else {
                percentage = (distance - startScroll) / (endScroll - startScroll);
            }

            const totalLength = path.getTotalLength();
            path.style.strokeDasharray = `${totalLength}`;
            path.style.strokeDashoffset = `${totalLength * (1 - percentage)}`;
        };

        drawSVG();
        window.addEventListener("scroll", drawSVG);

        return () => {
            window.removeEventListener("scroll", drawSVG);
        };
    }, []);
    return (
        <>
            <div className={styles.journeyContainer}>
                <div className={styles.journeyBody}>
                    <svg className={styles.line} viewBox="0 0 604 1122" fill="none" presereveaspectratio="xMidYMax meet">
                        <path
                            d="M75.5 0.5L230.5 155.5C272.333 185.333 381.2 245 482 245C582.8 245 560.667 305.333 537 335.5L521.5 353.5M521.5 353.5C516 362.833 507.7 379.7 524.5 376.5C535.337 374.436 542.683 364.001 544 361.5M521.5 353.5C523 352 526.2 348.2 533 349C539.8 349.8 544.667 356.333 544.5 361.5C545.032 362.328 544.725 360.124 544 361.5M544 361.5C547.5 361.5 540.4 379.8 522 401C516.209 391.809 511.15 383.679 506.742 376.5M505.794 374.956C483.003 337.764 478.169 326.916 479 326.5C487.616 342.137 505.036 373.72 505.794 374.956ZM505.794 374.956C506.107 375.465 506.422 375.98 506.742 376.5M506.742 376.5C500.661 386.5 485.5 403.5 473.5 391.5C461.5 379.5 450.5 366.5 446.5 361.5L468 389.5C441.5 405.5 439 402 437 401C435 400 374.5 358 374.5 358C386 394.5 398 421 391.5 421L347 367.5C359.8 413.5 366 398 363.5 426.5C346.7 430.9 342.167 431 342 430.5C337.167 423.167 325.7 408.7 318.5 409.5C309.5 410.5 306 415.5 304 424C302 432.5 306.5 418 311 415C314.6 412.6 321.5 413.333 324.5 414C329.5 417.167 338.6 424.9 335 430.5C330.5 437.5 314 446 313 437.5C312 429 305.5 430 303 435.5C300.5 441 303.5 446 294 449C284.5 452 282 448.5 280 450C272 440 270 432.833 270 430.5C264.833 424.167 255.3 411.1 258.5 409.5C265.5 407 264 405 267 409.5C264.2 413.9 262.5 412 262 410.5L268 433C270.167 439.167 273.7 452.1 270.5 454.5C266.5 457.5 243 466 240 458.5C237.6 452.5 241.667 449.333 244 448.5C226.833 443.5 193.5 436.1 197.5 446.5C202.5 459.5 174 444 200 446C226 448 240.5 440 234 451C227.5 462 205 483 194 479.5C183 476 176 453 167.5 456.5C160.7 459.3 153.667 466.667 151 470C145.5 474.833 138.3 484.7 153.5 485.5C172.5 486.5 181.5 483.5 181.5 481C181.5 478.5 167.5 478 149.5 486.5C135.1 493.3 150.833 519 160.5 531C179.333 556.833 219.3 596.5 228.5 548.5C240 488.5 235.5 481.5 231 485.5C226.5 489.5 222 494 226.5 493.5C231 493 234.5 489 232.5 489.5C230.5 490 227 488 228.5 491.5C230 495 305.5 438.5 339.5 486.5C373.5 534.5 474 490 463 543.5C454.2 586.3 394.333 607.333 365.5 612.5C297.167 626.667 173.7 667.8 226.5 719C292.5 783 410 797 411 805C412 813 96.5 851.5 403 834C648.2 820 582.5 875.5 519 905L603 877V1077H479.5V974.5L572 981.5V1030L528 1021V947.5C531.667 940.999 539 933.098 539 953.5C539 973.902 539 1073.67 539 1121H362.5L316 844C338.333 823.333 382.5 797.1 380.5 857.5C378.5 917.9 379.667 1029 380.5 1077H436.5V871H460.5V938.5C537.5 889.667 614.4 823.1 306 947.5C-2.39999 1071.9 -18.5 948.333 12 871H79.5V947.5H141.5V897H114.5V991.5H64V947.5H46V964.5H141.5V1121"
                            stroke="white" strokeWidth={1} />
                    </svg>
                </div>
            </div>
        </>
    );
}

export default Journey;
